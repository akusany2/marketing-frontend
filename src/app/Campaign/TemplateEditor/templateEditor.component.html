<nz-layout class="h-100pt">
  <nz-header class="mb-10">
    <app-header></app-header>
  </nz-header>
  <nz-content>

    <div nz-row>
      <div nz-col nzSpan="12">
        <h2 align="center">Template editor</h2>
        <form nz-form [formGroup]="templateEditForm" class="">

          <nz-form-item>
            <nz-form-label [nzSm]="6" [nzXs]="24" [nzXl]="6" nzRequired nzFor="templateName">Template
              name</nz-form-label>
            <nz-form-control [nzSm]="14" [nzXs]="24" [nzXl]="10" nzErrorTip="Template name required" nzHasFeedback>
              <input type="text" nz-input formControlName="templateName" placeholder="Template name" required />
            </nz-form-control>
          </nz-form-item>

          <nz-form-item>
            <nz-form-label [nzSm]="6" [nzXs]="24" [nzXl]="6">Primary text
            </nz-form-label>
            <nz-form-control [nzSm]="14" [nzXs]="24" [nzXl]="10">
              <textarea nz-input formControlName="primaryText" placeholder="Primary text"
                [nzAutosize]="{ minRows: 4, maxRows: 12 }"></textarea>
            </nz-form-control>
          </nz-form-item>

          <nz-form-item>
            <nz-form-label [nzSm]="6" [nzXs]="24" [nzXl]="6">Secondary text
            </nz-form-label>
            <nz-form-control [nzSm]="14" [nzXs]="24" [nzXl]="10">
              <textarea nz-input formControlName="secondaryText" placeholder="Secondary text"
                [nzAutosize]="{ minRows: 4, maxRows: 12 }"></textarea>
            </nz-form-control>
          </nz-form-item>

          <div nz-row>
            <div nz-col nzSpan="8" nzOffset="4">
              <button (click)="submitTemplate(templateEditForm.value)" [disabled]="!templateEditForm.valid" nz-button
                class="login-form-button" [nzType]="'primary'">Submit</button>
              <!-- <button *ngIf="audienceDataEntity" (click)="submitEditAudience(audienceCreateForm.value)" nz-button
              class="login-form-button" [nzType]="'primary'">Edit Audience</button> -->
            </div>

          </div>

        </form>
      </div>
      <div nz-col nzSpan="12" class="h-600">
        <iframe id="templatePreview" #templateIframe src="" frameborder="0" class="w-100pt h-100pt"></iframe>
      </div>
    </div>
    <br><br>
    <div>
      <h2>Select Audience</h2>
      <nz-table #filterTable [nzData]="listOfDisplayAudience$ | async" [nzLoading]="isListLoading$ | async"
        [nzShowPagination]="false" class="bg-white">
        <thead>
          <tr>
            <th>
              Name
            </th>
            <th>Source</th>
            <th>
              Email
            </th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let data of filterTable.data">
            <td>{{ data.name }}</td>
            <td>{{ data.source }}</td>
            <td>{{ data.email }}</td>
            <td>
              <a (click)="editAudience(data._id)">Edit</a>
              <nz-divider nzType="vertical"></nz-divider>
              <a (click)="deleteAudience(data._id)">Delete</a>
            </td>
          </tr>
        </tbody>
      </nz-table>
    </div>

  </nz-content>
  <!-- <nz-footer>Footer</nz-footer> -->
</nz-layout>
